JMP start

:FACT
R_PUSH RAX
R_PUSH RCX
PUSH 1
JE exit

R_POP RAX
R_PUSH RCX
R_PUSH RAX
MUL
R_PUSH RCX
PUSH 1
SUB
R_POP RCX
R_POP RAX
JMP NEXT

:exit
R_POP RBX
JMP ret

:NEXT
CALL FACT

:ret
RET

:start

IN
R_POP RCX
PUSH 1
R_POP RDX
PUSH 1
R_POP RAX
CALL FACT
R_PUSH RBX
OUT
END
